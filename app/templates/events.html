{% extends "layout.html" %}

{% block content %}
<div class="container">
    <h1>{{ title }}</h1>

    <a href="{{ url_for('events.create_event') }}">
        <button>Create New Event</button>
    </a>

    {% for event in events %}
    <div class="event-card">
        <h2><a href="{{ url_for('events.event_detail', event_id=event.id) }}">{{ event.title }}</a></h2>
        <p><strong>Date:</strong> {{ event.date }}</p>
        <p><strong>Host:</strong> {{ event.host }}</p>
        <p>{{ event.description[:100] }}{% if event.description|length > 100 %}...{% endif %}</p>

        <a href="{{ url_for('events.edit_event', event_id=event.id) }}">
            <button>Edit</button>
        </a>

        <form method="POST" action="{{ url_for('events.delete_event', event_id=event.id) }}" style="display:inline;">
            <button type="submit">Delete</button>
        </form>
    </div>
    {% else %}
    <p>No events yet. <a href="{{ url_for('events.create_event') }}">Create one now!</a></p>
    {% endfor %}
</div>
{% endblock %}
