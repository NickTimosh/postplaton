{% extends "layout.html" %}

{% block content %}
<section class="events-page">

    <h1 class="page-title">{{ event.title }}</h1>

    <p class="event-detail-tag">
        <span class="tag-icon">{{ event.tag.icon or 'ü§î' }}</span>
        <span class="tag-name">{{ event.tag.name }}</span>
    </p>

    <div class="event-details-block">

        <p class="event-details-line">
            <strong>Date:</strong>
            {{ event.event_datetime.strftime('%A, %d %B %Y, %H:%M') }}
        </p>

        <p class="event-details-line">
            <strong>Host:</strong> {{ event.host }}
        </p>

        <p class="event-details-description">{{ event.description }}</p>

        {% if current_user.is_authenticated and current_user.is_host %}
        <div class="event-details-actions">
            <a href="{{ url_for('events.edit_event', event_id=event.id) }}"
               class="btn small btn-edit">Edit</a>

            <form method="POST"
                  action="{{ url_for('events.delete_event', event_id=event.id) }}"
                  class="inline-form">
                <button type="submit" class="btn small btn-delete">Delete</button>
            </form>
        </div>
        {% endif %}

    </div>

<h2 class="group-heading">Resources</h2>

{% if event.resources %}
<ul class="resource-list detailed">

    {% for resource in event.resources %}
    <li class="resource-item detailed">

        <div class="resource-line">
            <a href="{{ resource.url }}" target="_blank" class="resource-title">
                {{ resource.title }}
            </a>

            <div class="resource-meta">

                {# DOMAIN #}
                {% if resource.domain %}
                    <span class="resource-domain">{{ resource.domain }}</span>
                {% else %}
                    <span class="resource-domain none">(no domain)</span>
                {% endif %}

                {# RESOURCE TAG #}
                {% if resource.tag %}
                    <span class="resource-tag">
                        {{ resource.tag.icon }} {{ resource.tag.name }}
                    </span>
                {% endif %}

            </div>
        </div>

    </li>
    {% endfor %}

</ul>
{% else %}
<p class="event-details-line">No resources yet.</p>
{% endif %}

    <p class="event-details-line" style="margin-top: 26px;">
        <a href="{{ url_for('events.events_list') }}">‚Üê Back to Events</a>
    </p>

</section>
{% endblock %}
